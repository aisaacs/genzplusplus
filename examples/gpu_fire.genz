ðŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ’€ GPU FIRE â€” classic demoscene fire effect in a real window
ðŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ðŸ’€ bottom-row seeding, upward propagation with cooling, heat->RGB
ðŸ’€ 1/4 res with 4x4 fat pixels â€” ESC or close window to quit
ðŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

plug in gpu
plug in math
plug in random
plug in list

yeet W = 320
yeet H = 200
yeet w = gpu.spawn(W, H, âœ¨genz++ gpu fireâœ¨)

ðŸ’€ logic resolution â€” 1/4 of window, each pixel is a 4x4 block
yeet PX = 4
yeet LW = W / PX
yeet LH = H / PX

ðŸ’€ fire buffer â€” heat values 0-255 at logic resolution
yeet buf_size = LW * LH
yeet fire = list.mint(buf_size, 0)

ðŸ’€ fire palette â€” map heat to RGB
ðŸ’€ black -> red -> yellow -> white
bruh heat_to_rgb(heat) tho
    sus heat < 64 tho
        its giving [heat * 4, 0, 0]
    nah sus heat < 128 tho
        its giving [255, (heat - 64) * 4, 0]
    nah sus heat < 192 tho
        its giving [255, 255, (heat - 128) * 4]
    nah
        its giving [255, 255, 255]
    bet
bet

vibe check w.serve() tho
    sus w.pressed(âœ¨escâœ¨) tho
        dip
    bet

    ðŸ’€ set bottom row to random hot values
    yeet x = 0
    vibe check x < LW tho
        yeet idx = (LH - 1) * LW + x
        fire[idx] = random.pick(160, 255)
        yeet x = x + 1
    bet

    ðŸ’€ propagate fire upward with cooling
    yeet y = 0
    vibe check y < LH - 1 tho
        yeet x = 0
        vibe check x < LW tho
            yeet idx = (y + 1) * LW + x

            ðŸ’€ average neighbors from row below + some randomness
            yeet left = fire[idx - 1]
            sus x be 0 tho
                yeet left = fire[idx]
            bet
            yeet right = fire[idx + 1]
            sus x be LW - 1 tho
                yeet right = fire[idx]
            bet
            yeet below = fire[idx]
            yeet below2 = fire[idx]
            sus y + 2 < LH tho
                yeet below2 = fire[(y + 2) * LW + x]
            bet

            yeet avg = (left + right + below + below2) / 4
            yeet cool = random.pick(2, 14)
            yeet heat = avg - cool
            sus heat < 0 tho
                yeet heat = 0
            bet
            fire[y * LW + x] = math.humbled(heat)

            yeet x = x + 1
        bet
        yeet y = y + 1
    bet

    ðŸ’€ render to window â€” 4x4 fat pixels
    yeet y = 0
    vibe check y < LH tho
        yeet x = 0
        vibe check x < LW tho
            yeet heat = fire[y * LW + x]
            yeet rgb = heat_to_rgb(heat)
            w.drip(x * PX, y * PX, PX, PX, rgb[0], rgb[1], rgb[2])
            yeet x = x + 1
        bet
        yeet y = y + 1
    bet

    ðŸ’€ title overlay
    w.stan(âœ¨FIREâœ¨, 10, 10, 255, 255, 255, 2)
    w.stan(âœ¨ESC=QUITâœ¨, 10, H - 20, 120, 120, 140)

    w.flaunt()
bet

w.unalive()
spill âœ¨âœ¨
spill âœ¨ðŸ’€ fire extinguished. the toaster has woken up.âœ¨

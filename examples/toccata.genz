ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’€ TOCCATA & FUGUE IN D MINOR â€” Bach x Cyberpunk
ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’€ procedural plasma + procedural audio synthesis demoscene
ğŸ’€ every pixel computed, every note synthesized, zero files loaded
ğŸ’€ ESC to quit
ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

plug in gpu
plug in math
plug in sound
plug in time

yeet W = 200
yeet H = 100
yeet w = gpu.spawn(W, H, âœ¨TOCCATA â€” genz++âœ¨)
yeet snd = sound.spawn()
snd.volume(80)

ğŸ’€ plasma resolution â€” 4x4 fat pixels
yeet PX = 4
yeet LW = W / PX
yeet LH = H / PX

ğŸ’€ music energy â€” drives visual reactivity
yeet energy = 0
yeet bass_e = 0
yeet pt = 0
yeet t = 0
yeet LOOP = 1500

ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’€ SOUND HELPERS
ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’€ organ â€” stacks octaves like a pipe organ with multiple stops
bruh organ(of, od, ov) tho
    snd.bop(âœ¨sawâœ¨, of, od, ov)
    snd.bop(âœ¨sawâœ¨, of * 2, od, ov * 0.6)
    snd.bop(âœ¨squareâœ¨, of, od, ov * 0.3)
    yeet energy = 1
bet

ğŸ’€ lead â€” saw + square doubling for the runs
bruh lead(lf, ld, lv) tho
    snd.bop(âœ¨sawâœ¨, lf, ld, lv)
    snd.bop(âœ¨squareâœ¨, lf, ld, lv * 0.25)
    yeet energy = 0.8
bet

bruh bass_note(nf, nd, nv) tho
    snd.bop(âœ¨squareâœ¨, nf, nd, nv)
    snd.bop(âœ¨sineâœ¨, nf, nd, nv * 0.5)
    yeet bass_e = 1
bet

ğŸ’€ heavy kick â€” sub-bass thump + transient
bruh kick() tho
    snd.noise(80, 65)
    snd.bop(âœ¨sineâœ¨, 50, 150, 60)
    snd.bop(âœ¨sineâœ¨, 30, 100, 45)
    yeet bass_e = 1
bet

ğŸ’€ snare â€” noise crack + mid tone
bruh snare() tho
    snd.noise(180, 55)
    snd.bop(âœ¨triâœ¨, 200, 60, 30)
    yeet energy = 0.7
bet

bruh hat() tho
    snd.noise(30, 25)
bet

bruh open_hat() tho
    snd.noise(80, 30)
bet

ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’€ MAIN LOOP
ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

vibe check w.serve() tho
    yeet frame_start = time.rn()

    sus w.pressed(âœ¨escâœ¨) tho
        dip
    bet

    snd.serve()

    ğŸ’€ decay music energy each frame
    yeet energy = energy * 0.93
    yeet bass_e = bass_e * 0.91

    ğŸ’€ plasma time â€” speeds up on note hits
    yeet pt = pt + 0.07 + energy * 0.05

    yeet f = t % LOOP

    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ’€ TOCCATA â€” rubato opening
    ğŸ’€ dramatic pauses, accelerating runs
    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    ğŸ’€ sub-bass rumble buildup
    sus f be 5 tho
        snd.slide(âœ¨sineâœ¨, 40, 500, 800, 30)
    bet

    ğŸ’€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ğŸ’€ FIRST PHRASE â€” high octave
    ğŸ’€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    ğŸ’€ mordent: D5-C#5-D5 (lightning fast)
    sus f be 30 tho
        lead(587, 35, 75)
    bet
    sus f be 32 tho
        lead(554, 35, 70)
    bet
    ğŸ’€ held D5 â€” fermata with organ fullness
    sus f be 34 tho
        organ(587, 900, 75)
    bet

    ğŸ’€ descending run: A4-G4-F4-E4-D4-C#4-D4
    ğŸ’€ ACCELERATING â€” gaps decrease: 11, 10, 9, 8, 6, 5
    sus f be 100 tho
        lead(440, 170, 70)
    bet
    sus f be 111 tho
        lead(392, 155, 70)
    bet
    sus f be 121 tho
        lead(349, 140, 70)
    bet
    sus f be 130 tho
        lead(330, 125, 70)
    bet
    sus f be 138 tho
        lead(294, 100, 70)
    bet
    sus f be 144 tho
        lead(277, 80, 65)
    bet
    ğŸ’€ resolve on D4 â€” fermata
    sus f be 149 tho
        organ(294, 1000, 75)
        bass_note(147, 1000, 35)
    bet

    ğŸ’€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ğŸ’€ SECOND PHRASE â€” one octave lower
    ğŸ’€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    ğŸ’€ mordent: D4-C#4-D4
    sus f be 240 tho
        lead(294, 35, 75)
    bet
    sus f be 242 tho
        lead(277, 35, 70)
    bet
    ğŸ’€ held D4 â€” fermata
    sus f be 244 tho
        organ(294, 900, 75)
    bet

    ğŸ’€ descending run: A3-G3-F3-E3-D3-C#3-D3
    sus f be 310 tho
        lead(220, 170, 70)
    bet
    sus f be 321 tho
        lead(196, 155, 70)
    bet
    sus f be 331 tho
        lead(175, 140, 70)
    bet
    sus f be 340 tho
        lead(165, 125, 70)
    bet
    sus f be 348 tho
        lead(147, 100, 70)
    bet
    sus f be 354 tho
        lead(139, 80, 65)
    bet
    ğŸ’€ resolve on D3 â€” long fermata
    sus f be 359 tho
        organ(147, 1300, 75)
        bass_note(73, 1300, 50)
    bet

    ğŸ’€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ğŸ’€ TENSION â€” diminished approach
    ğŸ’€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    sus f be 460 tho
        snd.slide(âœ¨sawâœ¨, 1000, 60, 800, 35)
        snd.slide(âœ¨sineâœ¨, 50, 500, 700, 30)
    bet
    sus f be 490 tho
        snd.noise(300, 40)
    bet

    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ’€ THE CHORD â€” D minor, every stop pulled
    ğŸ’€ 12 voices: sub-bass through mixture
    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    sus f be 520 tho
        ğŸ’€ sub-bass foundation
        snd.bop(âœ¨sineâœ¨, 36, 3500, 55)
        snd.bop(âœ¨sineâœ¨, 73, 3500, 55)

        ğŸ’€ bass organ â€” saw + square
        snd.bop(âœ¨sawâœ¨, 147, 3500, 50)
        snd.bop(âœ¨squareâœ¨, 147, 3500, 30)

        ğŸ’€ principal â€” the core of the organ
        snd.bop(âœ¨sawâœ¨, 220, 3500, 45)
        snd.bop(âœ¨sawâœ¨, 294, 3500, 50)
        snd.bop(âœ¨sawâœ¨, 349, 3500, 45)

        ğŸ’€ octave stop â€” brilliance
        snd.bop(âœ¨sawâœ¨, 440, 3000, 40)
        snd.bop(âœ¨sawâœ¨, 587, 3000, 35)

        ğŸ’€ mixture â€” shimmer
        snd.bop(âœ¨squareâœ¨, 294, 3000, 25)
        snd.bop(âœ¨squareâœ¨, 440, 2500, 20)

        ğŸ’€ crash impact
        snd.noise(600, 60)

        yeet energy = 1
        yeet bass_e = 1
    bet

    ğŸ’€ reverb tail
    sus f be 523 tho
        snd.noise(200, 40)
    bet
    sus f be 530 tho
        snd.slide(âœ¨sineâœ¨, 80, 2500, 1200, 20)
    bet

    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ’€ BEAT DROP â€” cyberpunk kicks in
    ğŸ’€ 120 BPM = 30 frames per beat
    ğŸ’€ bar = 120 frames
    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    sus f >= 750 tho
        ğŸ’€ crash cymbal on the drop
        sus f be 750 tho
            snd.noise(500, 60)
        bet

        ğŸ’€ â”€â”€ drums: kick + snare + hats â”€â”€
        yeet bf = (f - 750) % 120

        ğŸ’€ four-on-the-floor kick
        sus bf be 0 tho
            kick()
        bet
        sus bf be 30 tho
            kick()
        bet
        sus bf be 60 tho
            kick()
        bet
        sus bf be 90 tho
            kick()
        bet

        ğŸ’€ snare on 2 and 4
        sus bf be 30 tho
            snare()
        bet
        sus bf be 90 tho
            snare()
        bet

        ğŸ’€ hi-hats on 8th notes â€” closed on beat, open offbeat
        sus bf be 0 tho
            hat()
        bet
        sus bf be 15 tho
            open_hat()
        bet
        sus bf be 30 tho
            hat()
        bet
        sus bf be 45 tho
            open_hat()
        bet
        sus bf be 60 tho
            hat()
        bet
        sus bf be 75 tho
            open_hat()
        bet
        sus bf be 90 tho
            hat()
        bet
        sus bf be 105 tho
            open_hat()
        bet

        ğŸ’€ â”€â”€ bass: D2 and A2 alternating every half-bar â”€â”€
        yeet bb = (f - 750) % 120
        sus bb be 0 tho
            bass_note(73, 400, 55)
        bet
        sus bb be 60 tho
            bass_note(110, 400, 50)
        bet

        ğŸ’€ â”€â”€ fugue subject on organ lead â”€â”€
        yeet mf = (f - 750) % 240
        sus mf be 0 tho
            organ(294, 200, 55)
        bet
        sus mf be 30 tho
            organ(440, 200, 55)
        bet
        sus mf be 60 tho
            lead(587, 130, 60)
        bet
        sus mf be 75 tho
            lead(554, 80, 55)
        bet
        sus mf be 90 tho
            organ(587, 280, 65)
        bet
        sus mf be 120 tho
            organ(349, 200, 55)
        bet
        sus mf be 150 tho
            organ(330, 200, 55)
        bet
        sus mf be 180 tho
            lead(294, 130, 60)
        bet
        sus mf be 195 tho
            lead(277, 80, 55)
        bet
        sus mf be 210 tho
            organ(294, 280, 65)
        bet
    bet

    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ’€ PLASMA â€” cyberpunk palette
    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    yeet y = 0
    vibe check y < LH tho
        yeet x = 0
        vibe check x < LW tho
            ğŸ’€ four overlapping sines â€” classic plasma
            yeet v1 = math.vibes(x * 0.08 + pt)
            yeet v2 = math.vibes(y * 0.1 + pt * 0.7)
            yeet v3 = math.vibes((x + y) * 0.06 + pt * 0.6)
            yeet v4 = math.vibes(math.glow(x * x + y * y) * 0.04 + pt * 0.5)
            yeet val = (v1 + v2 + v3 + v4) * 0.25

            ğŸ’€ cyberpunk color mapping: purple â†’ magenta â†’ cyan
            yeet phase = val * 3.14159 + pt * 0.3
            yeet pr = math.ate(math.vibes(phase))
            yeet pg = math.ate(math.vibes(phase + 4.2))
            yeet pb = math.ate(math.vibes(phase + 2.1))

            ğŸ’€ R: magenta/red â€” squared for high contrast
            ğŸ’€ G: subdued, flares on melody hits
            ğŸ’€ B: dominant cyan/purple base
            yeet flash = bass_e * 80
            yeet r = math.humbled(pr * pr * 220 + flash)
            yeet g = math.humbled(pg * 50 + energy * 100)
            yeet b = math.humbled(pb * 255)

            sus r > 255 tho
                yeet r = 255
            bet
            sus g > 255 tho
                yeet g = 255
            bet

            ğŸ’€ scanline darkening â€” every other row
            sus y % 2 be 0 tho
                yeet r = math.humbled(r * 0.7)
                yeet g = math.humbled(g * 0.7)
                yeet b = math.humbled(b * 0.7)
            bet

            w.drip(x * PX, y * PX, PX, PX, r, g, b)
            yeet x = x + 1
        bet
        yeet y = y + 1
    bet

    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ğŸ’€ TITLE OVERLAY
    ğŸ’€ â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    yeet tr = 200 + math.humbled(bass_e * 55)
    yeet tg = 140 + math.humbled(energy * 80)
    yeet tb = 220 + math.humbled(bass_e * 35)

    sus f < 520 tho
        w.stan(âœ¨TOCCATA & FUGUEâœ¨, 262, 16, tr, tg, tb, 3)
        w.stan(âœ¨IN D MINORâœ¨, 333, 52, 160, 100, 180, 2)
    nah
        w.stan(âœ¨TOCCATAâœ¨, 330, 16, tr, tg, tb, 3)
    bet
    w.stan(âœ¨BWV 565 x CYBERPUNKâœ¨, 291, H - 38, 100, 70, 140, 2)
    w.stan(âœ¨genz++âœ¨, 375, H - 18, 70, 50, 90)

    w.flaunt()

    ğŸ’€ cap at 60fps so music plays at correct tempo
    yeet frame_ms = time.rn() - frame_start
    sus frame_ms < 16 tho
        time.nap(16 - frame_ms)
    bet

    yeet t = t + 1
bet

snd.unalive()
w.unalive()
spill âœ¨âœ¨
spill âœ¨ğŸ’€ toccata complete. bach has been cyberpunked.âœ¨
